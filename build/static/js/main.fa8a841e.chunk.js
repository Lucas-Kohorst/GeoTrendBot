(this.webpackJsonpGeoTrendBot=this.webpackJsonpGeoTrendBot||[]).push([[0],{134:function(e,t,a){},182:function(e,t,a){e.exports=a(404)},187:function(e,t,a){},188:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},402:function(e,t,a){e.exports=a.p+"static/media/map.562ff858.png"},404:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(64),c=a.n(o),s=(a(187),a(188),a(134),a(181)),i=a(50),l=a.n(i),m=a(130),h=a(92),u=a(93),p=a(97),d=a(94),g=a(98),b=a(4),f=a(173),w=a(174),E=a(172),k=a(129),v=a(175),y=a(177),O=Object(b.d)(y.ReactLeafletSearch),j=function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e)))._callSearchAPI=Object(m.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/search/"+a.state.hashtag);case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),a._createMarkers=function(e){for(var t=[],a=0;a<e.length;a++)t.push(r.a.createElement(f.a,{position:[e[a].lat,e[a].long],key:a},r.a.createElement(w.a,null,r.a.createElement("h1",null,e[a].name),r.a.createElement("h3",null,e[a].timestamp),r.a.createElement("a",{href:e[a].source,target:"_blank"},r.a.createElement("h2",null,e[a].tweet)))));return t};var n=window.location.search,o=new URLSearchParams(n).get("search");return a.state={search:o,positions:[],streetView:null,tweet:"",name:"",timestamp:"",source:"",hashtag:e.hashtag?e.hashtag:e.match.params.hashtag},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._callSearchAPI().then(function(){var t=Object(m.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<a.tweets.length)){t.next=9;break}if(""==a.tweets[n].user.location){t.next=6;break}return e.setState({tweet:a.tweets[n].text,name:a.tweets[n].user.name,timestamp:a.tweets[n].created_at.split("+")[0]}),t.next=6,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+a.tweets[n].user.location+".json?access_token=pk.eyJ1IjoibHVjYXNrb2hvcnN0IiwiYSI6ImNrMmc4ZzR1ajBzYmgzam1vbzBscHo1ajIifQ.mRP73FdC3Fhwe6QShpZhQw").then((function(e){if(!e.ok)throw new Error("Network Response Error");return e.json()})).then((function(t){try{var a=t.features[0].geometry.coordinates[0],n=t.features[0].geometry.coordinates[1],r=e.state.name,o=e.state.tweet,c=e.state.timestamp,i=e.state.source;e.setState((function(e){return{positions:[].concat(Object(s.a)(e.positions),[{lat:n,long:a,name:r,tweet:o,timestamp:c,source:i}])}}))}catch(l){}})).catch((function(e){}));case 6:n++,t.next=1;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E.a,{className:"sidebar-map",center:[50,10],zoom:3,maxZoom:10,attributionControl:!0,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35},r.a.createElement(O,{position:"topright",zoom:10,openSearchOnLoad:!0,showMarker:!1,showPopup:!1,inputPlaceholder:"Search Latitude, Longitude",closeResultsOnClick:!0}),r.a.createElement(k.b,{position:"bottomleft"},r.a.createElement(k.b.BaseLayer,{name:"OpenStreetMap.BlackAndWhite"},r.a.createElement(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"})),r.a.createElement(k.b.BaseLayer,{name:"OpenStreetMap.Mapnik",checked:!0},r.a.createElement(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}))),r.a.createElement(v.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors | Fork me on <a href="https://github.com/Lucas-Kohorst/GeoTrendBot">Github</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),this._createMarkers(this.state.positions)))}}]),t}(r.a.Component),x=a(99),S=a(178),B=a.n(S),M=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"2em"}},r.a.createElement(B.a,{repo:"https://github.com/lucas-kohorst/GeoTrendBot",colorBackground:"white",colorOctocat:"black",side:"right"}),r.a.createElement("h1",null,"GeoTrendBot"),r.a.createElement("p",null,"Visualize trends on Twitter"),r.a.createElement("img",{src:a(402),alt:"Example Map",height:400,style:{padding:"2em"}}),r.a.createElement("div",{className:"centerContent"},r.a.createElement("div",{className:"selfCenter standardWidth"},r.a.createElement(x.c,{sourceType:"timeline",screenName:"geotrendbot",options:{height:400}}),r.a.createElement("div",{className:"flex-row"},r.a.createElement(x.a,{screenName:"geotrendbot"}),r.a.createElement(x.b,{screenName:"geotrendbot"})))))}}]),t}(r.a.Component),N=a(179),z=a(51);var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(N.a,null,r.a.createElement(z.a,{path:"/:hashtag",component:j}),r.a.createElement(z.a,{path:"/"},r.a.createElement(M,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[182,1,2]]]);
//# sourceMappingURL=main.fa8a841e.chunk.js.map